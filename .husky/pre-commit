#!/bin/sh
set -e

# Load nvm if available
export NVM_DIR="$HOME/.nvm"
[ -s "$NVM_DIR/nvm.sh" ] && \. "$NVM_DIR/nvm.sh"

echo "ğŸš€ Running pre-commit checks (fast local validation)..."

# 1. Run linting and type checking (fast)
echo "ğŸ“ Running linting..."
npm run lint

echo "ğŸ” Running type checking..."
npm run check

# 2. Run unit tests only (fast)
echo "ğŸ§ª Running unit tests..."
npm test

# Security audit runs in CI only (not pre-commit) to avoid blocking on transient dev dependency issues

echo "âœ… Pre-commit checks passed! (Security audit and deployment tests run in CI)"